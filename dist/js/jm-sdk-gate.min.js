var jm=jm||{};"undefined"!=typeof exports&&"undefined"!=typeof module&&(jm=require("jm-sdk-core"),require("jm-ms")),function(){if(!jm.sdk.gate){var i=jm.sdk,t=jm.ms;i.on("init",function(t){var e="gate";t[e]=t[e]||{},t[e].uri=t[e].uri||t.uri,t[e].timeout=t[e].timeout||t.timeout,i[e].init(t[e])}),i.gate={init:function(i){var e=this;i=i||{};var n=i.uri,r=i.prefix||"/gate";this.uri=n+r,t.client({uri:this.uri,timeout:i.timeout||0},function(i,t){e.client=t}),jm.enableEvent(this)},_geturi:function(i){return"/"+i.name},getService:function(i,t){t=t||function(){},i=i||{};var e=this._geturi(i);this.client.get({uri:e,data:i},t)},registerService:function(i,t){t=t||function(){},i=i||{};var e=this._geturi(i);this.client.post({uri:e,data:i},t)},deregisterService:function(i,t){t=t||function(){},i=i||{};var e="/"+i.id;this.client.delete({uri:e},t)},listService:function(i,t){t=t||function(){},i=i||{};var e=this._geturi(i);this.client.get({uri:e,data:i},t)}}}}();